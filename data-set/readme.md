# Data Attributes In JavaScript
https://blog.webdevsimplified.com/2020-10/javascript-data-attributes/  


Один из лучших способов хранения данных в HTML — использование атрибутов данных. Эти атрибуты данных можно использовать для выполнения некоторых довольно интересных вещей в CSS без необходимости использования JavaScript, как показано в этой статье , но атрибуты данных наиболее полезны в сочетании с JavaScript. В этой статье я научу вас, как именно использовать атрибуты данных в JavaScript и что делает их такими мощными.

Введение в атрибуты данных
Чтобы начать говорить об атрибутах данных, нам нужно сначала иметь HTML с атрибутами данных. Чтобы создать атрибут данных в HTML, нам просто нужно добавить настраиваемый атрибут в наш HTML-элемент, который начинается с data-.

```js
<div
  id="test-div"
  data-first-name="Kyle"
  data-last-name="Cook"
  data-active
></div>
```

## Чтение атрибутов данных
Теперь у нас есть div с тремя пользовательскими атрибутами данных. Теперь давайте перейдем к JavaScript, чтобы посмотреть, как мы будем получать доступ к этим атрибутам данных.

```js
const div = document.getElementById("test-div")
console.log(div.dataset)
```

Свойство datasetэлемента вернет a DOMStringMap, который, по сути, является просто объектом, содержащим все пользовательские атрибуты данных элемента. Наш datasetвыглядит так.

```js
{
  active: ""
  firstName: "Kyle"
  lastName: "Cook"
}
```

Вы заметите две интересные вещи по этому поводу.

Во-первых, все наши свойства преобразуются из случая змеи first-nameв случай верблюда firstName. Это связано с тем, что в JavaScript свойства объекта в основном записываются в верблюжьем регистре, что значительно упрощает работу с объектом JavaScript.

Во-вторых, activeсвойство имеет значение "". Это связано с тем, что предполагается, что любой атрибут данных без значения имеет в качестве значения пустую строку.

Теперь, чтобы получить доступ к отдельному атрибуту данных, мы просто обращаемся к нему, как к свойству объекта, поскольку datasetэто всего лишь объект.

```js
const div = document.getElementById("test-div")
console.log(div.dataset.firstName) // Kyle
console.log(div.dataset.lastName) // Cook
```

## Запись атрибутов данных
Чтобы создать новый атрибут данных в JavaScript, нам просто нужно добавить новое свойство к datasetобъекту со значением.

```js
const div = document.getElementById("test-div")
div.dataset.test = "Hi"
console.log(div.dataset.test) // Hi
```

Это обновит объект набора данных и наш HTML, что означает, что наш HTML будет выглядеть так.
```js
<div
  id="test-div"
  data-test="Hi"
  data-first-name="Kyle"
  data-last-name="Cook"
  data-active
></div>
```

## Обновление атрибутов данных
Допустим, теперь мы хотим обновить значение атрибута данных. Это невероятно просто, поскольку работает так же, как обычный объект. Нам просто нужно установить значение нашего datasetсвойства в новое значение, и оно обновит HTML для нас.

```js
const div = document.getElementById("test-div")
div.dataset.firstName = "Sally"
console.log(div.dataset.firstName) // Sally
```

Это обновит объект набора данных и наш HTML, что означает, что наш HTML будет выглядеть так.
```js
<div
  id="test-div"
  data-first-name="Sally"
  data-last-name="Cook"
  data-active
></div>
```

## Удалить атрибуты данных

Удаление атрибутов данных немного отличается, поскольку нам нужно фактически удалить свойство из нашего объекта. Это связано с тем, что если мы попытаемся установить значение undefinedили , nullобъект datasetпо-прежнему будет иметь ссылку на это свойство с этим значением undefinedили nullи установит значение нашего атрибута данных HTML в строку nullили undefined.

Чтобы удалить элемент, нам нужно использовать deleteключевое слово, чтобы полностью удалить его из объекта.

```js
const div = document.getElementById("test-div")
delete div.dataset.active
console.log(div.dataset.active)// undefined
```
Это обновит объект набора данных и наш HTML, что означает, что наш HTML будет выглядеть так.

```js
<div
  id="test-div"
  data-first-name="Sally"
  data-last-name="Cook"
></div>
```

## Пример реального мира
Теперь давайте объединим все это в пример из реального мира. Допустим, у вас есть следующий HTML.

```js
<button>Open Modal 1</button>
<button>Open Modal 2</button>
<div id="modal-1">Modal 1</div>
<div id="modal-2">Modal 2</div>
```

Вы хотите написать JavaScript так, чтобы первая кнопка открывала модальное окно 1, а вторая кнопка открывало модальное окно 2, но мы хотим сделать это таким образом, чтобы его можно было использовать повторно, поэтому, если мы добавим третью кнопку, которая открывает новое модальное окно, нам это не нужно. для написания любого нового кода JavaScript.

Поначалу это может показаться очень сложным, но, по сути, все, что нам нужно, — это каким-то образом связать каждую кнопку с соответствующим модальным окном в HTML. Здесь вступают в действие атрибуты данных.

Мы можем установить пользовательский атрибут данных для каждой кнопки, который ссылается на модальное окно, с которым они связаны. В нашем случае мы можем использовать идентификатор каждого модального окна в качестве ссылки.

```js
<button data-modal-id="modal-1">Open Modal 1</button>
<button data-modal-id="modal-2">Open Modal 2</button>
<div id="modal-1">Modal 1</div>
<div id="modal-2">Modal 2</div>
```

Итак, теперь у нас есть способ получить доступ к идентификатору модального окна, связанного с каждой кнопкой внутри JavaScript.

```js
const buttons = document.querySelectorAll("[data-modal-id]")

buttons.forEach(button => {
  button.addEventListener("click", () => {
    const modalId = button.dataset.modalId
    const modal = document.getElementById(modalId)
    modal.classList.add("show")
  })
})
```

В приведенном выше коде мы выбираем все элементы, которые содержат наш пользовательский data-modal-idатрибут. Затем мы просматриваем их и добавляем прослушиватель событий щелчка к каждому из них. Внутри этого прослушивателя событий мы используем модальный идентификатор, чтобы получить модальную ссылку на эту кнопку, и добавляем класс show, чтобы он теперь был виден.
Этот код также является гибким, поскольку он получит любой элемент с пользовательским data-modal-idатрибутом. Это означает, что если мы добавим новую кнопку, которая ссылается на новое модальное окно, нам не нужно будет писать дополнительный JavaScript.

## Заключение
Атрибуты данных в JavaScript невероятно полезны. Они позволяют вам писать чрезвычайно гибкий код, что означает, что вы можете тратить больше времени на написание HTML для своего проекта и меньше времени беспокоиться о написании настраиваемого прослушивателя событий для каждого нового добавляемого элемента.
